# tf_base
# Terraform Base Homework

## Итерация по списку
В этом уроке показывалось как можно используя мета-аргумент for_each изменить создание подсетей, чтобы они создавались на основе списка зон доступности в облаке. Это более подходящий вариант для работы с подсетями, так как он позволяет динамически создавать или удалять объекты при изменении списка зон доступности. Так же в этом задании мы разрешим пользователю создавать любое количество виртуальных машин и автоматически распределять их по имеющимся подсетям и зонам.

1. Реализуйте для ресурса subnet итерацию по списку подсетей, так как было показано в видео.
2. Добавьте переменную vm_count типа number.
3. Измените конфигурацию yandex_compute_instance, чтобы создавать столько виртуальных машин, сколько указано в переменной

Пока не будем трогать создание таргет группы в балансере. В следующем уроке научимся динамически добавлять в нее созданные виртуальные машины, вне зависимости от их количества. Для выполнения текущего задания можете временно переименовать файл с конфигурацией балансировщика в .tf.back, чтобы Terraform не видел этот файл.

4. Добавьте распределение по зонам доступности и подсетям как было показано в видео с помощью операции остатка от деления
В качестве делителя используйте длину списка az
```length(az)```
5. Проверьте работу конфигурации. В том числе попробуйте убрать из переменной az одну зону.
При этом вы должны увидеть, что автоматически удаляется одна подсеть, а виртуальные машины перераспределяются по оставшимся.
6. После завершения задания удалите созданную инфраструктуру